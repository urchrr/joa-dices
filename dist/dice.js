parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"r2Ab":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.DoomDice=exports.GiganticDice=exports.WhiteDice=exports.YellowDice=exports.RedDice=exports.BlackDice=exports.EmptyDice=exports.attack=exports.Face=exports.Dice=void 0;var e,r=function(){function t(){this.result=new Map}return t.prototype.roll=function(t){void 0===t&&(t=1);for(var e=0;e<t;e++){var r=this.faces[Math.floor(Math.random()*this.faces.length)];r&&this.result.set(r,(this.result.get(r)||0)+1),console.debug(this.constructor.name,"rolled a",this.result)}return this},t.prototype.reset=function(){return this.result.clear(),this},t.prototype.add=function(t){var e=this;return i.map(function(r){var i=(e.result.get(r)||0)+(t.result.get(r)||0);0!=i&&e.result.set(r,i)}),console.debug(this.constructor.name,"sum is",this.result),this},t.prototype.toObject=function(){var t={type:this.constructor.name,result:{}};return Array.from(this.result,function(e){var r=e[0],i=e[1];t.result[r]=i}),t},t.prototype.filter=function(t){return this.result.delete(t),this},t.prototype.applyDefense=function(t){return this.lower(e.Push,this.lower(e.Disrupt,this.lower(e.Kill,t.result.get(e.Shield)||0))),this},t.prototype.lower=function(t,e){var r=this.result.get(t);return r?r-e>0?(this.result.set(t,r-e),0):(this.result.delete(t),e-r):e},t}();exports.Dice=r,function(t){t.Kill="kill",t.Disrupt="disrupt",t.Push="push",t.Shield="shield",t.Blank="blank",t.Trample="trample",t.Death="death",t.Rally="rally",t.DelayedRally="delayed rally"}(e=exports.Face||(exports.Face={}));var i=Object.keys(e).map(function(t){return e[t]});function n(t,r){void 0===r&&(r=new Map);var i=new s,n=new s;return Array.from(t,function(t){var e=t[0],r=t[1];return i.add(e.roll(r))}),Array.from(r,function(t){var e=t[0],r=t[1];return n.add(e.roll(r))}),0==n.result.size?{attack:i.toObject().result}:{attack:i.toObject().result,defence:n.toObject().result,final:(new s).add(i).applyDefense(n).filter(e.Blank).filter(e.Shield).toObject().result}}exports.attack=n;var s=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[],t}return t(r,e),r}(r);exports.EmptyDice=s;var l=function(r){function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.faces=[e.Kill,e.Disrupt,e.Shield,e.Disrupt,e.Shield,e.Shield],t}return t(i,r),i}(r);exports.BlackDice=l;var o=function(r){function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.faces=[e.Kill,e.Disrupt,e.Push,e.Disrupt,e.Kill,e.Shield],t}return t(i,r),i}(r);exports.RedDice=o;var u=function(r){function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.faces=[e.Blank,e.Disrupt,e.Push,e.Blank,e.Push,e.Shield],t}return t(i,r),i}(r);exports.YellowDice=u;var a=function(r){function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.faces=[e.Shield,e.Blank,e.Disrupt,e.Push,e.Disrupt,e.Shield],t}return t(i,r),i}(r);exports.WhiteDice=a;var c=function(r){function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.faces=[e.Kill,e.Disrupt,e.Disrupt,e.Trample,e.Trample,e.Push],t}return t(i,r),i}(r);exports.GiganticDice=c;var p=function(r){function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.faces=[e.Disrupt,e.Rally,e.DelayedRally,e.Rally,e.Death,e.Death],t}return t(i,r),i}(r);exports.DoomDice=p;
},{}]},{},["r2Ab"], null)
//# sourceMappingURL=/dice.js.map