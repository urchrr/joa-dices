parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"r2Ab":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();exports.__esModule=!0;var r,e=function(){function t(){this.result=new Map}return t.prototype.roll=function(t){void 0===t&&(t=1);for(var r=0;r<t;r++){var e=this.faces[Math.floor(Math.random()*this.faces.length)];e&&this.result.set(e,(this.result.get(e)||0)+1),console.debug(this.constructor.name,"rolled a",this.result)}return this},t.prototype.reset=function(){return this.result.clear(),this},t.prototype.add=function(t){var r=this;return n.map(function(e){var n=(r.result.get(e)||0)+(t.result.get(e)||0);0!=n&&r.result.set(e,n)}),console.debug(this.constructor.name,"sum is",this.result),this},t.prototype.toObject=function(){var t={type:this.constructor.name,result:{}};return Array.from(this.result,function(r){var e=r[0],n=r[1];t.result[e]=n}),t},t.prototype.filter=function(t){return this.result.delete(t),this},t.prototype.applyDefense=function(t){return this.lower(r.Push,this.lower(r.Disrupt,this.lower(r.Kill,t.result.get(r.Shield)||0))),this},t.prototype.lower=function(t,r){var e=this.result.get(t);return e?e-r>0?(this.result.set(t,e-r),0):(this.result.delete(t),r-e):r},t}();exports.Dice=e,function(t){t.Kill="kill",t.Disrupt="disrupt",t.Push="push",t.Shield="shield",t.Blank="blank",t.Trample="trample",t.Death="death",t.Rally="rally",t.DelayedRally="delayed rally"}(r=exports.Face||(exports.Face={}));var n=Object.keys(r).map(function(t){return r[t]});function i(t,e){void 0===e&&(e=new Map);var n=new s,i=new s;return Array.from(t,function(t){var r=t[0],e=t[1];return n.add(r.roll(e))}),Array.from(e,function(t){var r=t[0],e=t[1];return i.add(r.roll(e))}),0==i.result.size?{attack:n.toObject().result}:{attack:n.toObject().result,defence:i.toObject().result,final:(new s).add(n).applyDefense(i).filter(r.Blank).filter(r.Shield).toObject().result}}exports.attack=i;var s=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.faces=[],t}return t(e,r),e}(e);exports.EmptyDice=s;var l=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Kill,r.Disrupt,r.Shield,r.Disrupt,r.Shield,r.Shield],t}return t(n,e),n}(e);exports.BlackDice=l;var u=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Kill,r.Disrupt,r.Push,r.Disrupt,r.Kill,r.Shield],t}return t(n,e),n}(e);exports.RedDice=u;var o=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Blank,r.Disrupt,r.Push,r.Blank,r.Push,r.Shield],t}return t(n,e),n}(e);exports.YellowDice=o;var a=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Shield,r.Blank,r.Disrupt,r.Push,r.Disrupt,r.Shield],t}return t(n,e),n}(e);exports.WhiteDice=a;var c=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Kill,r.Disrupt,r.Disrupt,r.Trample,r.Trample,r.Push],t}return t(n,e),n}(e);exports.GiganticDice=c;var p=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Disrupt,r.Rally,r.DelayedRally,r.Rally,r.Death,r.Death],t}return t(n,e),n}(e);exports.DoomDice=p;
},{}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"1g74":[function(require,module,exports) {
var process = require("process");
var e=require("process");exports.__esModule=!0;var a=require("./dice");function c(c){var s=new Map,r=new Map,n=!1;function i(e,a){n?r.set(e,a+(r.get(e)||0)):s.set(e,a+(s.get(e)||0))}c.map(function(c){var s=parseInt(c.slice(0,-1));switch(c.slice(-1)){case"-":case"/":case":":n=!0;break;case"N":case"n":i(new a.BlackDice,s);break;case"R":case"r":i(new a.RedDice,s);break;case"J":case"j":case"Y":case"y":i(new a.YellowDice,s);break;case"B":case"b":exports.isFrenchUI?i(new a.WhiteDice,s):i(new a.BlackDice,s);break;case"W":case"w":i(new a.WhiteDice,s);break;case"G":case"g":i(new a.GiganticDice,s);break;case"D":case"d":i(new a.DoomDice,s);break;default:console.error("bad syntax"),e.exit(-1)}}),console.log(a.attack(s,r))}exports.isFrenchUI=!0,exports.parseCLI=c,console.debug=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a]},c(e.argv.slice(2));
},{"./dice":"r2Ab","process":"pBGv"}]},{},["1g74"], null)
//# sourceMappingURL=/dice-cli.js.map