#!/usr/bin/env node
parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"r2Ab":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();exports.__esModule=!0;var r,e=function(){function t(){this.result=new Map}return t.prototype.roll=function(t){void 0===t&&(t=1);for(var r=0;r<t;r++){var e=this.faces[Math.floor(Math.random()*this.faces.length)];e&&this.result.set(e,(this.result.get(e)||0)+1),console.debug(this.constructor.name,"rolled a",this.result)}return this},t.prototype.reset=function(){return this.result.clear(),this},t.prototype.add=function(t){var r=this;return n.map(function(e){var n=(r.result.get(e)||0)+(t.result.get(e)||0);0!=n&&r.result.set(e,n)}),console.debug(this.constructor.name,"sum is",this.result),this},t.prototype.toObject=function(){var t={type:this.constructor.name,result:{}};return Array.from(this.result,function(r){var e=r[0],n=r[1];t.result[e]=n}),t},t.prototype.filter=function(t){return this.result.delete(t),this},t.prototype.applyDefense=function(t){return this.lower(r.Push,this.lower(r.Disrupt,this.lower(r.Kill,t.result.get(r.Shield)||0))),this},t.prototype.lower=function(t,r){var e=this.result.get(t);return e?e-r>0?(this.result.set(t,e-r),0):(this.result.delete(t),r-e):r},t}();exports.Dice=e,function(t){t.Kill="kill",t.Disrupt="disrupt",t.Push="push",t.Shield="shield",t.Blank="blank",t.Trample="trample",t.Death="death",t.Rally="rally",t.DelayedRally="delayed rally"}(r=exports.Face||(exports.Face={}));var n=Object.keys(r).map(function(t){return r[t]});function i(t,e){void 0===e&&(e=new Map);var n=new s,i=new s;return Array.from(t,function(t){var r=t[0],e=t[1];return n.add(r.roll(e))}),Array.from(e,function(t){var r=t[0],e=t[1];return i.add(r.roll(e))}),0==i.result.size?{attack:n.toObject().result}:{attack:n.toObject().result,defence:i.toObject().result,final:(new s).add(n).applyDefense(i).filter(r.Blank).filter(r.Shield).toObject().result}}exports.attack=i;var s=function(r){function e(){var t=null!==r&&r.apply(this,arguments)||this;return t.faces=[],t}return t(e,r),e}(e);exports.EmptyDice=s;var l=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Kill,r.Disrupt,r.Shield,r.Disrupt,r.Shield,r.Shield],t}return t(n,e),n}(e);exports.BlackDice=l;var u=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Kill,r.Disrupt,r.Push,r.Disrupt,r.Kill,r.Shield],t}return t(n,e),n}(e);exports.RedDice=u;var o=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Blank,r.Disrupt,r.Push,r.Blank,r.Push,r.Shield],t}return t(n,e),n}(e);exports.YellowDice=o;var a=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Shield,r.Blank,r.Disrupt,r.Push,r.Disrupt,r.Shield],t}return t(n,e),n}(e);exports.WhiteDice=a;var c=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Kill,r.Disrupt,r.Disrupt,r.Trample,r.Trample,r.Push],t}return t(n,e),n}(e);exports.GiganticDice=c;var p=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.faces=[r.Disrupt,r.Rally,r.DelayedRally,r.Rally,r.Death,r.Death],t}return t(n,e),n}(e);exports.DoomDice=p;
},{}],"1g74":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e=require("./dice");function c(c){var a=new Map,s=new Map,r=!1;function n(e,c){r?s.set(e,c+(s.get(e)||0)):a.set(e,c+(a.get(e)||0))}c.map(function(c){var a=parseInt(c.slice(0,-1));switch(c.slice(-1)){case"-":case"/":case":":r=!0;break;case"N":case"n":n(new e.BlackDice,a);break;case"R":case"r":n(new e.RedDice,a);break;case"J":case"j":case"Y":case"y":n(new e.YellowDice,a);break;case"B":case"b":exports.isFrenchUI?n(new e.WhiteDice,a):n(new e.BlackDice,a);break;case"W":case"w":n(new e.WhiteDice,a);break;case"G":case"g":n(new e.GiganticDice,a);break;case"D":case"d":n(new e.DoomDice,a);break;default:console.error("bad syntax"),process.exit(-1)}}),console.log(e.attack(a,s))}exports.isFrenchUI=!0,exports.parseCLI=c,console.debug=function(){for(var e=[],c=0;c<arguments.length;c++)e[c]=arguments[c]},c(process.argv.slice(2));
},{"./dice":"r2Ab"}]},{},["1g74"], null)
//# sourceMappingURL=/dice-cli.js.map